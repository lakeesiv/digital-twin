# Advanced Example

In this example, we will create the live data page for each sensor corresponding to the route `/sensor/live/<id>`.

import { Steps } from "nextra/components";

<Steps>
### Define the Page

Create a page under the `pages/sensors/live` directory with the name `[id].tsx`. This will be the page that will be rendered for each sensor. Make sure to import the `Layout` component from `~/components/layout` and wrap the page content with it. This will ensure that the page will be wrapped in the default layout.

```tsx showLineNumbers
import Layout from "~/components/layout";

function Page() {
  return <Layout></Layout>;
}

export default Page;
```

### Get the Sensor ID

Next, we need to get the sensor ID from the URL. We can do this by using the `useRouter` hook from `next/router`.

```tsx {1, 5-9} showLineNumbers
import { useRouter } from "next/router";
import Layout from "~/components/layout";

function Page() {
  const router = useRouter();

  if (!router.query.id) {
    return null; // Return null when the sensor ID is not available
  }

  return <Layout></Layout>;
}

export default Page;
```

The hook is asynchronous, so we need to make sure that we return `null` when the sensor ID is not available. This will prevent the page from rendering until the sensor ID is available.

### Get the Sensor Data

We will use the `useSubscribeById` [hook](/web/websockets/use-subscribe-by-id) to get the sensor data. We will call the hook with the sensor ID from the URL (note how we cast the type to `string | undefined` this is because you can have an array of sensor IDs in the URL
but we do not support that, so to make TypeScript happy we need to cast the type to `string | undefined`).

Once we subscribe to the WS, we can display the subscription status using the `WSStatus` component from `~/components/ws-status`.

```tsx {3-4, 9-11, 19-25} showLineNumbers
import { useRouter } from "next/router";
import Layout from "~/components/layout";
import WSStatus from "~/components/ws-status";
import useSubscribeById from "~/websockets/useSubscribeById";

function Page() {
  const router = useRouter();

  const { connectionStatus, rtConnected, messageHistory } = useSubscribeById(
    router.query.id as string | undefined
  ); // Get the sensor data

  if (!router.query.id) {
    return null;
  }

  return (
    <Layout>
      <div className="flex items-center space-x-2">
        {/* Display the WebSocket Status */}
        <WSStatus
          connectionStatus={connectionStatus}
          rtConnected={rtConnected}
        />
      </div>
    </Layout>
  );
}

export default Page;
```

</Steps>
